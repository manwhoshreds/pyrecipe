# recipe_tool auto completion

_main() {
    local iter use cur
    cur=${COMP_WORDS[COMP_CWORD]}
    use=`python -m pyrecipe.db`
	# The next part efectively allows me to use completion 
	# words with spaces thanks to the post at:
    # https://stackoverflow.com/questions/26509260/bash-tab-completion-with-spaces
    use="${use//\\ /___}"
    # split on all spaces
    for iter in $use; do
        # only reply with completions
        if [[ $iter =~ ^$cur ]]; then
            # swap back our escaped spaces
            COMPREPLY+=("${iter//___/\\ }")
        fi
    done
}

complete -F _main recipe_tool
